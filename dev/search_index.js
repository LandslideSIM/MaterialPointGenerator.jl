var documenterSearchIndex = {"docs":
[{"location":"example/DEM/#DEM","page":"DEM","title":"DEM","text":"","category":"section"},{"location":"example/polyhedron/#Polyhedron","page":"Polyhedron","title":"Polyhedron","text":"","category":"section"},{"location":"example/polyhedron/","page":"Polyhedron","title":"Polyhedron","text":"If your model is not a DEM but rather a more generalized 3D model, we recommend that you first use an STL file to create the 3D model entity. Please note that it is recommended to use MeshLab or other tools to check and ensure that the surface mesh forms a closed 3D entity. ","category":"page"},{"location":"example/polyhedron/","page":"Polyhedron","title":"Polyhedron","text":"With MaterialPointGenerator.jl, we can easily accomplish this task by providing the STL file, specifying the output file (.xyz), and setting the voxel spacing. The basic idea is to voxelize the STL model and fill it with eight material particles. Therefore, the voxel spacing lp is recommended to match the grid spacing in MPM simulations. ","category":"page"},{"location":"example/polyhedron/","page":"Polyhedron","title":"Polyhedron","text":"The voxelization of the STL model is handled by trimesh; although we introduced a Python dependency, it is simple and efficient enough that users do not need to manually configure the Python environment. If you want to use your own Python env, please make sure CondaPkg.jl can find your env and install the packages in the CondaPkg.toml.","category":"page"},{"location":"example/polyhedron/","page":"Polyhedron","title":"Polyhedron","text":"Example:","category":"page"},{"location":"example/polyhedron/","page":"Polyhedron","title":"Polyhedron","text":"stl_file = \"/path/to/your/model.stl\"\noutput_file = \"/path/to/your/mode.xyz\" # just give the path even it is not exist\nlp = 2.5 # MPM grid size\npolyhedron2particle(stl_file, output_file, lp, verbose=true) # verbose==true will show the time profile\npts = readxyz(output_file)","category":"page"},{"location":"api/#API-Reference","page":"API","title":"API Reference","text":"","category":"section"},{"location":"api/#Simple-Mesh","page":"API","title":"Simple Mesh","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"meshbuilder","category":"page"},{"location":"api/#MaterialPointGenerator.meshbuilder","page":"API","title":"MaterialPointGenerator.meshbuilder","text":"meshbuilder(x::T, y::T; œµ=\"FP64\") where T <: AbstractRange\n\nDescription:\n\nGenerate structured mesh in 2D space.\n\n\n\n\n\nmeshbuilder(x::T, y::T, z::T; precision::String=\"FP64\") where T <: AbstractRange\n\nDescription:\n\nGenerate structured mesh in 3D space.\n\n\n\n\n\n","category":"function"},{"location":"api/#Polygon","page":"API","title":"Polygon","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"particle_in_polygon\npolygon2particle","category":"page"},{"location":"api/#MaterialPointGenerator.particle_in_polygon","page":"API","title":"MaterialPointGenerator.particle_in_polygon","text":"particle_in_polygon(px, py, polygon)\n\nDescription:\n\nDetermine whether a point is inside a polygon. Note the vertices of the polygon should be       ordered in a counterclockwise manner; otherwise, it may lead to incorrect results.  \n\n(This function is generated by ChatGPT 4o - 2024.10.10)\n\n\n\n\n\n","category":"function"},{"location":"api/#MaterialPointGenerator.polygon2particle","page":"API","title":"MaterialPointGenerator.polygon2particle","text":"polygon2particle(domain, lpx, lpy)\n\nDescription:\n\nGenerate structured particles from a given polygon. Note the vertices of the polygon should  be ordered in a counterclockwise manner; otherwise, it may lead to incorrect results.  \n\nlpx and lpy are the space of particles in x and y directions, respectively.\n\ndomain is the polygon, for example, domain = [0 0; 2 0; 2 1; 0 1] means generate structured particles in a rectangle area.\n\n\n\n\n\n","category":"function"},{"location":"api/#Polyhedron","page":"API","title":"Polyhedron","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"polyhedron2particle\nMaterialPointGenerator.readmsh\nMaterialPointGenerator.trimesh_voxelize","category":"page"},{"location":"api/#MaterialPointGenerator.polyhedron2particle","page":"API","title":"MaterialPointGenerator.polyhedron2particle","text":"polyhedron2particle(stl_file::String, output_file, lp; verbose::Bool=false)\n\nDescription:\n\nConvert a polyhedron (.stl) to a set of particles. The function will write the populated  particles of each voxel into a .xyz file. The voxel size is defined by lp, it is suggest to be equal to the MPM background grid size. The verbose is a flag to show the time  consumption of each step.\n\nExample:\n\npolyhedron2particle(\"/path/to/yout/model.stl\", \"/path/to/model.xyz\", 0.1, verbose=true)\n\n\n\n\n\n","category":"function"},{"location":"api/#MaterialPointGenerator.readmsh","page":"API","title":"MaterialPointGenerator.readmsh","text":"readmsh(msh_path::String; precision=\"FP32\")\n\nDescription:\n\nRead the mesh file (.msh) generated by Gmsh. The function will return the vertices and  faces for triangle. It's necessary to check the mesh qulity before using this function.  You can do it in MeshLab or Gmsh GUI. precision can be \"FP64\" or \"FP32\" in String.\n\n\n\n\n\n","category":"function"},{"location":"api/#MaterialPointGenerator.trimesh_voxelize","page":"API","title":"MaterialPointGenerator.trimesh_voxelize","text":"trimesh_voxelize(stl_file::String, lp)\n\nDescription:\n\nVoxelize the given STL model with the trimesh package. The voxel size is defined by lp.\n\n\n\n\n\n","category":"function"},{"location":"api/#DEM","page":"API","title":"DEM","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"dem2particle\nrasterizeDEM\nMaterialPointGenerator.IDW!","category":"page"},{"location":"api/#MaterialPointGenerator.dem2particle","page":"API","title":"MaterialPointGenerator.dem2particle","text":"dem2particle(dem, lpz, bottom)\n\nDescription:\n\nGenerate particles from a given DEM file. dem is a coordinates Array with three columns  (x, y, z). lpz is the space of particles in z direction. bottom is a Float64 value, which means the plane z = bottom.\n\n\n\n\n\ndem2particle(dem, lpz, bottom_surf)\n\nDescription:\n\nGenerate particles from a given DEM file and a bottom surface file. dem is a coordinates  Array with three columns (x, y, z). bottom_surf is a coordinates Array with three columns, but it should have the same x and y coordinates as the DEM, and the z value should be lower than the DEM. lpz is the space of particles in z direction.\n\n\n\n\n\n","category":"function"},{"location":"api/#MaterialPointGenerator.rasterizeDEM","page":"API","title":"MaterialPointGenerator.rasterizeDEM","text":"rasterizeDEM(lpx, lpy, dem; k=10, p=2, trimbounds=[0.0 0.0], dembounds=[0.0, 0.0])\n\nDescription:\n\nRasterize the DEM file to generate particles. lpx and lpy are the space of particles in x and y directions. dem is a coordinates Array with three columns (x, y, z). k is  the number of nearest neighbors (10 by default), p is the power parameter (2 by default),  trimbounds is the boundary of the particles, dembounds is the boundary of the DEM.\n\n\n\n\n\n","category":"function"},{"location":"api/#MaterialPointGenerator.IDW!","page":"API","title":"MaterialPointGenerator.IDW!","text":"IDW!(k, p, dem, idxs, ptslist, tree)\n\nDescription:\n\nInverse Distance Weighting (IDW) interpolation method. k is the number of nearest  neighbors, p is the power parameter, dem is a coordinates Array with three columns  (x, y, z), idxs is the index of the nearest neighbors, ptslist is the coordinates  Array of the particles, tree is the KDTree of the DEM.\n\n\n\n\n\n","category":"function"},{"location":"api/#Utils","page":"API","title":"Utils","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"savexyz\nreadxyz\nsortbycol","category":"page"},{"location":"api/#MaterialPointGenerator.savexyz","page":"API","title":"MaterialPointGenerator.savexyz","text":"savexyz(file_dir::P, pts::T) where {P <: String, T <: Array{Float64, 2}}\n\nDescription:\n\nSave the points pts to the xyz file file_dir.\n\n\n\n\n\n","category":"function"},{"location":"api/#MaterialPointGenerator.readxyz","page":"API","title":"MaterialPointGenerator.readxyz","text":"readxyz(file_dir::P) where P <: String\n\nDescription:\n\nRead the xyz file from file_dir.\n\n\n\n\n\n","category":"function"},{"location":"api/#MaterialPointGenerator.sortbycol","page":"API","title":"MaterialPointGenerator.sortbycol","text":"sortbycol(pts, col::T) where T <: Int\n\nDescription:\n\nSort the points in pts according to the column col.\n\n\n\n\n\n","category":"function"},{"location":"workflow/simple_mesh/#Simple-Mesh","page":"Simple Mesh","title":"Simple Mesh","text":"","category":"section"},{"location":"workflow/simple_mesh/","page":"Simple Mesh","title":"Simple Mesh","text":"Here, we consider generating rectangular domain nodes (2D) and cuboidal domain nodes (3D) by controlling the starting range and step size in each direction.","category":"page"},{"location":"workflow/simple_mesh/#2D","page":"Simple Mesh","title":"2D","text":"","category":"section"},{"location":"workflow/simple_mesh/","page":"Simple Mesh","title":"Simple Mesh","text":"Consider a rectangular area where the range in the x-direction is from 0 to 10 and in the  y-direction from 0 to 6. The step size in the x-direction is 1, and in the y-direction, it  is 2. Therefore, we can do:","category":"page"},{"location":"workflow/simple_mesh/","page":"Simple Mesh","title":"Simple Mesh","text":"pts = meshbuilder(0.0 : 1.0 : 10.0, 0.0: 2.0 : 6.0)","category":"page"},{"location":"workflow/simple_mesh/","page":"Simple Mesh","title":"Simple Mesh","text":"This way, we can obtain the results shown in the figure. The variable pts is an array  where the first column contains the x-coordinates of all the nodes, and the second column  contains the corresponding y-coordinates.","category":"page"},{"location":"workflow/simple_mesh/","page":"Simple Mesh","title":"Simple Mesh","text":"(Image: Figure1)","category":"page"},{"location":"workflow/simple_mesh/#3D","page":"Simple Mesh","title":"3D","text":"","category":"section"},{"location":"workflow/simple_mesh/","page":"Simple Mesh","title":"Simple Mesh","text":"pts = meshbuilder(0.0 : 1.0 : 10.0, 0.0: 2.0 : 6.0, 0.0 : 2.0 : 4.0)","category":"page"},{"location":"workflow/simple_mesh/","page":"Simple Mesh","title":"Simple Mesh","text":"MaterialPointGenerator.jlÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÈùûÂ∏∏‰æøÂà©ÁöÑÂáΩÊï∞Êù•ÂØºÂá∫‰∏âÁª¥ÁÇπÈõÜ‰ª•Êñπ‰æøÂèØËßÜÂåñ:","category":"page"},{"location":"workflow/simple_mesh/","page":"Simple Mesh","title":"Simple Mesh","text":"savexyz(output_dir, pts)","category":"page"},{"location":"workflow/simple_mesh/","page":"Simple Mesh","title":"Simple Mesh","text":"ÂÖ∂‰∏≠output_dirÊÇ®ÊÉ≥Ë¶ÅÂØºÂá∫ÁöÑË∑Ø, ptsÊòØ‰∏âÁª¥ÁÇπÈõÜÔºåÊàë‰ª¨ÂèØ‰ª•ËÆæÁΩÆ‰∏∫Ôºö","category":"page"},{"location":"workflow/simple_mesh/","page":"Simple Mesh","title":"Simple Mesh","text":"savexyz(joinpath(homedir(), \"tmp.xyz\"), pts)","category":"page"},{"location":"workflow/simple_mesh/","page":"Simple Mesh","title":"Simple Mesh","text":"(Image: Figure2)","category":"page"},{"location":"example/polygon/#Polygon","page":"Polygon","title":"Polygon","text":"","category":"section"},{"location":"workflow/DEM/#DEM","page":"DEM","title":"DEM","text":"","category":"section"},{"location":"workflow/DEM/","page":"DEM","title":"DEM","text":"note: Note\nHere we assume that the DEM file only includes the three-dimensional coordinates of points.  The input format for the DEM is a three-column array, where the first column represents the x-coordinate, the second column represents the corresponding y-coordinate, and the third  column is the z-coordinate.","category":"page"},{"location":"workflow/DEM/#DEM-with-a-flat-bottom-surface","page":"DEM","title":"DEM with a flat bottom surface","text":"","category":"section"},{"location":"workflow/DEM/","page":"DEM","title":"DEM","text":"ÂÅáËÆæÊàë‰ª¨Êúâ‰∫Ü‰∏Ä‰∏™DEMÊñá‰ª∂ÔºåÁÑ∂ÂêéÊÉ≥‰ª•Â∫ïÈù¢Ôºå‰æãÂ¶Çz=0Ëøô‰∏™Âπ≥Èù¢ÂØπËøô‰∏™DEMÊ®°ÂûãÈó≠ÂêàÔºåÈÇ£‰πàÂèØ‰ª•ÂÅöÔºö","category":"page"},{"location":"workflow/DEM/","page":"DEM","title":"DEM","text":"pts = dem2particle(dem, lpz, bottom)","category":"page"},{"location":"workflow/DEM/","page":"DEM","title":"DEM","text":"ÂÖ∂‰∏≠demÊòØÊã•Êúâ‰∏âÂàóÁöÑÊï∞ÁªÑÔºålpzÊòØÊ≤øzÊñπÂêëÂ∏ÉÁΩÆÁâ©Ë¥®ÁÇπÊó∂ÁöÑÊ≠•ÈïøÔºåbottomÊòØ‰∏Ä‰∏™Ê†áÈáèÂÄºÔºåË°®Á§∫Â∫ïÂπ≥Èù¢zÁöÑÈ´òÂ∫¶„ÄÇ","category":"page"},{"location":"workflow/DEM/","page":"DEM","title":"DEM","text":"pts = dem2particle(dem, 0.1, 0)\nsavexyz(joinpath(homedir(), \"tmp.xyz\"), pts)","category":"page"},{"location":"workflow/DEM/","page":"DEM","title":"DEM","text":"(Image: Figure3)","category":"page"},{"location":"workflow/DEM/#DEM-with-a-given-bottom-surface","page":"DEM","title":"DEM with a given bottom surface","text":"","category":"section"},{"location":"workflow/DEM/","page":"DEM","title":"DEM","text":"Â¶ÇÊûúËØ¥Áî®Êù•Èó≠ÂêàDEM1ÁöÑÂ∫ïÈù¢Âπ∂‰∏çÊòØ‰∏Ä‰∏™Âπ≥Èù¢ÔºåÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•ÊåáÂÆöÂè¶‰∏Ä‰∏™DEM2Êñá‰ª∂‰Ωú‰∏∫Áî®Êù•Èó≠ÂêàDEM1ÁöÑÂ∫ïÈù¢„ÄÇ","category":"page"},{"location":"workflow/DEM/","page":"DEM","title":"DEM","text":"pts = dem2particle(dem, lpz, bottom_surf)","category":"page"},{"location":"workflow/DEM/","page":"DEM","title":"DEM","text":"warning: Warning\nDEM2‰∏éDEM1Â∫îËØ•Âú®x-yÂπ≥Èù¢ÂÖ∑ÊúâÂÆåÂÖ®Áõ∏ÂêåÁöÑÂùêÊ†á„ÄÇËøôÂèØ‰ª•ÈÄöËøárasterizeDEMÊù•ÂÆûÁé∞„ÄÇ","category":"page"},{"location":"workflow/DEM/","page":"DEM","title":"DEM","text":"‰æãÂ¶ÇÔºö","category":"page"},{"location":"workflow/DEM/","page":"DEM","title":"DEM","text":"pts = dem2particle(dem, 0.1, bottom_surf)\nsavexyz(joinpath(homedir(), \"tmp.xyz\"), pts)","category":"page"},{"location":"workflow/DEM/","page":"DEM","title":"DEM","text":"(Image: Figure4)","category":"page"},{"location":"workflow/DEM/#DEM-interpolation","page":"DEM","title":"DEM interpolation","text":"","category":"section"},{"location":"workflow/DEM/","page":"DEM","title":"DEM","text":"ËøôÈáåÁöÑÊèíÂÄºÊòØÊåáDEM‰∏≠ÁöÑÁÇπÈõÜÂú®x-yÂπ≥Èù¢‰∏äËøõË°åÊèíÂÄºÔºåÂπ∂Ê†πÊçÆÁõ∏ÈÇªÁÇπÁöÑzÂùêÊ†áÊù•ËÆ°ÁÆóÂØπÂ∫îÁöÑzÂÄº„ÄÇÊúâ‰∫õÊó∂ÂÄôÊªëÂù°ÁöÑDEMÊñá‰ª∂ÂèØËÉΩÂú®x-yÂπ≥Èù¢Âπ∂‰∏çÊòØ ‰∏Ä‰∏™Áü©ÂΩ¢ÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØËÉΩÈúÄË¶ÅÂØπÂΩ¢Áä∂ËøõË°åË£ÅÂâ™„ÄÇ","category":"page"},{"location":"workflow/DEM/#DEM‰∏∫Áü©ÂΩ¢","page":"DEM","title":"DEM‰∏∫Áü©ÂΩ¢","text":"","category":"section"},{"location":"workflow/DEM/#DEMÈùûÁü©ÂΩ¢","page":"DEM","title":"DEMÈùûÁü©ÂΩ¢","text":"","category":"section"},{"location":"#MaterialPointGenerator","page":"Home","title":"MaterialPointGenerator","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"This package is used for generating structured particles for Material Point Method (MPM) simulation. The current particle generation method using Gmsh modeling may require GPU acceleration. We have provided a backend-agnostic solution that supports switching between NVIDIA (CUDA), AMD (ROCm), Apple (Metal), and Intel (oneAPI). Please follow the documentation step-by-step to reproduce the results.","category":"page"},{"location":"","page":"Home","title":"Home","text":"","category":"page"},{"location":"#Installation","page":"Home","title":"Installation ‚öôÔ∏è","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Just type ] in Julia's  REPL:","category":"page"},{"location":"","page":"Home","title":"Home","text":"julia> ]\n(@1.11) Pkg> add MaterialPointGenerator","category":"page"},{"location":"#Features","page":"Home","title":"Features ‚ú®","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Structured (regular) coordinates\nSupport Gmsh for complicated 2/3D models\nBackend-agnostic functions supports\nParticle generation from a Digital Elevation Model (DEM) file  \nAutomatically interpolate DEM files with support for shape trimming.","category":"page"},{"location":"#Acknowledgement","page":"Home","title":"Acknowledgement üëç","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"This project is sponserd by Risk Group | Universit√© de Lausanne and China Scholarship Council [‰∏≠ÂõΩÂõΩÂÆ∂ÁïôÂ≠¶Âü∫ÈáëÁÆ°ÁêÜÂßîÂëò‰ºö].","category":"page"},{"location":"workflow/polyhedron/#Polyhedron","page":"Polyhedron","title":"Polyhedron","text":"","category":"section"},{"location":"workflow/polygon/#Polygon","page":"Polygon","title":"Polygon","text":"","category":"section"}]
}
